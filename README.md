# Ez4Canteen（Easy for Canteen）

Author:	Ethereal

Date:	    2024.8.2

---

## Log

### 2024.9.4	Ethereal

- 小程序：修复了商品下架仍然可以被购买的bug。同时优化了项目内大多数冗余的内容。

- Web：【V1.0.0】版本上线。完成后台管理系统的大部分基础功能。
- STM32：修复了一些已知的bug。
- Ez4Canteen：至此项目总体【V1.0.0】版本制作完成。

### 2024.8.28	Ethereal

- Web：完成关于、收入与支出数据表展示、收入与支出统计图展示、收入与支出报表导出、页面的制作。

### 2024.8.23	Ethereal

- Web：完成首页、商品管理、历史订单页面的制作。

### 2024.8.21	Ethereal

- 小程序：【V1.0.0】版本上线。修复了大部分的bug，已经可以正常完成基础功能。
- Web：进入后台管理系统的开发阶段。使用uni-app的uni-admin模板进行开发。
- STM32：【V1.0.0】版本上线。

### 2024.8.18	Ethereal

- STM32： 功能整合完毕，实现了基于FreeRTOS，小程序点单后可以通过控制打印机打印小票。

### 2024.8.11	Ethereal

- STM32、小程序：完成了对阿里云物联网平台的对接，小程序票据信息可以传输至ESP8266模块。

### 2024.8.9	Ethereal

- STM32：移植进入了FreeRTOS。外接EM5820嵌入式热敏打印模块，通过串口进行了调试，调试成功。

### 2024.8.8	Ethereal

- 小程序：完善了细节，包括堂食、打包的选择和评论功能。增加与MQTT服务器的对接，可以通过订阅、推送消息将票据所需信息发送。
- STM32：进入STM32开发阶段。

### 2024.8.7	Ethereal

- 小程序：修改了登录方式，使用手机号进行登录和注册，将手机号作为键值，修复了[Log3](#2024.8.5	Ethereal)的bug。数据库基本上对接完毕。大体功能完成。待完善的有：余额的充值、积分商城的开发（是否需要？）、礼品券的开发（是否需要？），微信支付等功能。

### 2024.8.6	Ethereal

- 小程序：完成了历史订单、购物车对接云数据库的更新。

### 2024.8.5	Ethereal

- 小程序：完成了点餐、个人信息的对接云数据库的需求。个人信息的云数据库因为不能获取用户手机号暂时有些bug存在（用户改名后将成为新用户）【已修复】。

### 2024.8.4	Ethereal

- 小程序：完整基础前端框架，包括用户登录、首页、下单等功能。

### 2024.8.2	Ethereal

- 小程序：使用uni-app进行开发，使用uni-cloud对接云数据库。

## 小程序端——商品列表

1. 烧烤系列——大口吃肉

   - 牛肉串（小）	
   - 牛肉串（大）
   - 鸭肠串
   - 烤肠
   - 螺肉串
   - 奥尔良鸡腿
   - 奥尔良鸡翅
   - 骨肉相连
   - 鱿鱼串
   - 里脊肉
   - 蚂蚱串
   - 青椒牛肉串
2. 烧烤系列——素味美食

   - 玉米串
   - 蒜香茄子
   - 韭菜串
   - 包菜串
3. 卤味系列——吃口卤味

   - 风味毛豆
   - 风味腐竹
   - 卤味猪蹄
   - 卤味鸭脖
   - 卤味鸡爪
   - 卤味小鸡腿
   - 卤蛋
4. 爆炒系列——主食选择

   - 蛋炒宽粉/蛋炒河粉
   - 蛋炒细粉/蛋炒粉丝
   - 蛋炒饭
   - 加个煎蛋
   - 加个炒蛋
5. 甜品系列——饭后点心

   - 钵仔糕
6. 酒水系列——吃饱喝足

   - 啤酒
   - 可乐
   - 雪碧
   - 矿泉水
   - 白酒一杯
7. 口味选择——辣王登场

   - 爆辣
   - 重辣
   - 中辣
   - 微辣
   - 不辣


## 小程序端——云数据库详情

| 编号 |    表名    |                             内容                             |
| :--: | :--------: | :----------------------------------------------------------: |
|  1   | shop_list  |         包含了各个商品的信息，包括id，名称，价格等。         |
|  2   | store_list | 包含了各个商家的信息，包括店名、电话等。应用为支持一家商家所设计。 |
|  3   | user_info  | 包含了登录用户的信息，包括昵称、头像、首次登录时间、历史订单等。暂时由于内容的限制不能读取用户的手机号作为唯一标识符，暂时使用昵称作为唯一标识。后续可以通过强制让用户更新手机号来获取标识符。 |

### shop_list表：

以下为shop_list表的数据解释：

```json
{
    "icon": "大类展示前的图标",
    "name": "大类名称",
    "goods_list": [
        {
            "id": "商品编号",
            "sales": "已售量",
            "is_sell": "上架/下架中",
            "price": "价格",
            "content": "文本描述",
            "name": "商品名称",
            "images":"商品图片路径"
        }
    ],
    "id": "大类序号"
}
```

### store_list表：

以下为store_list表的数据解释：

```json
{
    "mobile": "手机号码",
    "name": "店名"
}
```

### user_info表：

以下为user_info表的数据解释：

```json
{
    "mobilePhone": "手机号码",
    "avatar": "头像路径",
    "cardName": "会员卡名称",
    "memberLevel": "会员等级",
    "birthday": "生日日期",
    "pointNum": "积分",
    "balance": "余额",
    "needValue": "升级所需积分",
    "orders": [
        {
            "pay_mode": "支付方式",
            "goods_num": "购买商品种类数量",
            "status_text": "状态信息",
            "remark": "备注",
            "mobile": "手机号码",
            "user_name": "用户昵称",
            "store": {
                "name": "店名"
            },
            "completed_time": "完成时间",
            "amount": "总价",
            "productioned_time": "生产时间",
            "postscript": "堂食/打包",
            "sort_num": "取单号",
            "order_no": "订单编号",
            "review": {},//评价
            "goods": [
                {
                    "number": "数量",
                    "price": "价格",
                    "image": "商品图片路径",
                    "amount": "总价",
                    "name": "商品名称"
                }
            ]
        }
    ],
    "nickname": "用户昵称",
    "openingCardDate": "注册日期",
    "password": "密码"
}
```

## STM32端——票据模板

模板如下：需要的数据包括**sort_num**、**completed_time**、**postscript**、**remark**、**goods的number、price、amount**、**总体的amount**、**user_name**、**mobile**、**order_no**。

![image-20240808195009429](https://mp-13a86627-9a4d-45d3-a214-e84c157a7c27.cdn.bspapp.com/web-about/image-20240808195009429.png)

## WEB端——页面结构

```
首页
系统管理
	用户管理
	角色管理
	权限管理
	标签管理
	菜单管理
商品管理
	商品管理
	类别管理
经营状况
	流水一览
	支出情况
	收入情况
关于
	关于Ez4Canteen
	README文档
```

